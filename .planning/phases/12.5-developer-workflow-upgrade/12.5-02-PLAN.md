# Plan 12.5-02: Factory.ai Droids + GitHub Integration

## Objective

Install Factory.ai CLI, connect the GitHub App to the Samsara repository, install droid-factory custom templates, and configure Droids for autonomous coding and review workflows.

## Tasks

### 1. Install Factory.ai CLI

- Install Droid CLI (Windows PowerShell installer from factory.ai)
- Authenticate via browser sign-in
- Verify CLI works: run `droid` in Samsara project directory
- Note: starts with 20M free tokens, no payment required initially

### 2. Connect GitHub App

- Ensure GitHub CLI (`gh`) is installed and authenticated
- Refresh OAuth scopes: `gh auth refresh -s repo,read:org`
- Run `/install-github-app` in Droid CLI
- Select Samsara repository for Droid access
- Review and merge the generated workflow PR
- Create API key at https://app.factory.ai/settings/api-keys
- Add `FACTORY_API_KEY` as GitHub Actions secret

### 3. Install droid-factory Templates

- Run `npx droid-factory` (from https://github.com/iannuttall/droid-factory)
- Choose installation scope (project-level `./.factory` for Samsara)
- Browse and select relevant command/droid templates
- Review installed templates and customize for Samsara's stack (Electron + React + Python sidecar)

### 4. Configure Droid Workflows

- **Code Review Droid:** Enable automated review on PR creation
  - Configure via GitHub Actions workflow
  - Test with a sample PR
- **Research Droid:** Test `droid exec` in spec-mode for codebase analysis
  - Verify it can reason about Samsara's architecture
  - Test: `droid exec "Analyze the IPC handler pattern in src/main/"`
- **Autonomy Levels:** Start with `--auto low` (file editing only), escalate as trust builds

### 5. Test Long-Running Droid Sessions

- Run an interactive Droid session for a research task
- Verify multi-hour capability with the Spec -> Test -> Implement -> Verify loop
- Test headless mode: `droid exec --output json "Summarize the Samsara architecture"`

## Success Criteria

- [ ] `droid` CLI launches and authenticates in Samsara project
- [ ] GitHub App connected — `@droid` mentions work in issues/PRs
- [ ] droid-factory templates installed at `.factory/`
- [ ] Code review Droid triggers on PR creation
- [ ] `droid exec` returns useful analysis in headless mode

## Notes

- Factory Pro is $20/mo for 20M tokens — monitor usage
- Droids use multi-model (Claude, GPT, Gemini) internally
- DroidShield provides real-time security scanning on generated code
