---
phase: 09-communication-infrastructure
plan: 04
type: execute
wave: 3
depends_on: ["09-03"]
files_modified:
  - src/renderer/components/templates/TemplateEditor.tsx
  - src/renderer/components/templates/TemplateList.tsx
  - src/renderer/components/wheel/types.ts
  - src/renderer/components/outreach/OutreachSection.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Template editor header buttons do not overflow or get cut off at narrow widths"
    - "Delete template shows AlertDialog confirmation before deletion"
    - "Outreach section displays visible content (not blank screen)"
    - "Outreach wheel wedge is clickable and navigates to section"
  artifacts:
    - path: "src/renderer/components/templates/TemplateEditor.tsx"
      provides: "Fixed header layout with proper flex constraints"
      contains: "flex-shrink-0"
    - path: "src/renderer/components/templates/TemplateList.tsx"
      provides: "AlertDialog for delete confirmation"
      contains: "AlertDialog"
    - path: "src/renderer/components/wheel/types.ts"
      provides: "comingSoon: false for candidate-outreach"
      contains: "comingSoon: false"
    - path: "src/renderer/components/outreach/OutreachSection.tsx"
      provides: "High-contrast empty state text"
      contains: "text-foreground"
  key_links:
    - from: "src/renderer/components/templates/TemplateList.tsx"
      to: "AlertDialog"
      via: "import from ui/alert-dialog"
      pattern: "AlertDialog"
---

<objective>
Fix 4 UAT-discovered issues in Phase 9 components.

Purpose: Close gaps identified during user acceptance testing before marking phase complete. All fixes are small CSS/component changes with no architectural impact.

Output: Corrected TemplateEditor header layout, AlertDialog-based delete confirmation in TemplateList, enabled Outreach section with visible empty state.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@src/renderer/components/templates/TemplateEditor.tsx
@src/renderer/components/templates/TemplateList.tsx
@src/renderer/components/wheel/types.ts
@src/renderer/components/outreach/OutreachSection.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix TemplateEditor header overflow</name>
  <files>src/renderer/components/templates/TemplateEditor.tsx</files>
  <action>
Fix the header toolbar layout (lines 172-229) to prevent button overflow at narrow widths:

1. Wrap the left side content (title, type toggle, variable dropdown) in a div with classes: `flex items-center gap-4 min-w-0 flex-shrink`
2. Add `truncate` class to the h2 title element so it truncates rather than pushing buttons off
3. Wrap the right side buttons (Cancel, Save) in a div with class: `flex items-center gap-2 flex-shrink-0`

The flex-shrink-0 on the right ensures buttons never shrink, while the left side can shrink/truncate as needed.
</action>
<verify>
Resize the Template Editor panel to a narrow width (< 600px). The Cancel and Save buttons should remain fully visible. The title should truncate with ellipsis if needed.
</verify>
<done>Header buttons remain visible at all reasonable viewport widths; title truncates gracefully</done>
</task>

<task type="auto">
  <name>Task 2: Replace delete two-click with AlertDialog</name>
  <files>src/renderer/components/templates/TemplateList.tsx</files>
  <action>
Replace the current two-click delete pattern (which fails because Radix DropdownMenu closes between clicks) with an AlertDialog:

1. Add AlertDialog imports from "../ui/alert-dialog":
   - AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent
   - AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger

2. Add state for the template pending deletion:

   ```typescript
   const [templateToDelete, setTemplateToDelete] =
     useState<MessageTemplate | null>(null);
   ```

3. Remove the deleteConfirmId state and related timeout logic (lines 35, 59-67)

4. Change the delete DropdownMenuItem to set templateToDelete instead of calling handleDelete:

   ```tsx
   <DropdownMenuItem
     className="text-destructive focus:text-destructive"
     onClick={(e) => {
       e.stopPropagation();
       setTemplateToDelete(template);
     }}
   >
     <Trash2 className="h-4 w-4 mr-2" />
     Delete
   </DropdownMenuItem>
   ```

5. Add AlertDialog at the end of the component (before the closing div):
   ```tsx
   <AlertDialog
     open={!!templateToDelete}
     onOpenChange={(open) => !open && setTemplateToDelete(null)}
   >
     <AlertDialogContent>
       <AlertDialogHeader>
         <AlertDialogTitle>Delete Template</AlertDialogTitle>
         <AlertDialogDescription>
           Are you sure you want to delete "{templateToDelete?.name}"? This
           action cannot be undone.
         </AlertDialogDescription>
       </AlertDialogHeader>
       <AlertDialogFooter>
         <AlertDialogCancel>Cancel</AlertDialogCancel>
         <AlertDialogAction
           className="bg-destructive text-destructive-foreground hover:bg-destructive/90"
           onClick={async () => {
             if (templateToDelete) {
               await deleteTemplate(templateToDelete.id);
               setTemplateToDelete(null);
             }
           }}
         >
           Delete
         </AlertDialogAction>
       </AlertDialogFooter>
     </AlertDialogContent>
   </AlertDialog>
   ```
   </action>
   <verify>
6. Open Templates section
7. Create a test template if none exist
8. Click the "..." menu on a template
9. Click "Delete" - AlertDialog should appear
10. Click "Cancel" - dialog closes, template remains
11. Repeat and click "Delete" in dialog - template is deleted
    </verify>
    <done>Delete action shows AlertDialog confirmation; template only deleted after explicit confirmation</done>
    </task>

<task type="auto">
  <name>Task 3: Enable Outreach section and fix empty state</name>
  <files>
    src/renderer/components/wheel/types.ts
    src/renderer/components/outreach/OutreachSection.tsx
  </files>
  <action>
Two fixes to make Outreach section accessible and visible:

**In types.ts:**
Change the candidate-outreach entry (around line 39) from `comingSoon: true` to `comingSoon: false`.

**In OutreachSection.tsx:**
Fix the empty state text visibility (lines 215-224 and 365-374). The current text uses `text-muted-foreground` which has low contrast on dark backgrounds.

For the "no selected candidate" empty state (lines 365-374):

- Change `text-muted-foreground/20` on the icon to `text-muted-foreground/40` for better visibility
- Change `text-muted-foreground` on paragraphs to `text-foreground/70` for readable contrast
- Change `text-muted-foreground/70` to `text-foreground/50`

For the candidate list empty state (lines 215-226):

- Change `text-muted-foreground/30` on the icon to `text-muted-foreground/50`
- The text colors here are already acceptable (text-muted-foreground)
  </action>
  <verify>

1. Click the "Candidate Outreach" wedge on the Samsara Wheel - it should navigate to the Outreach section (no longer shows "Coming Soon")
2. With no candidates: the empty state message should be clearly readable
3. With candidates but none selected: the right panel message should be clearly readable on the dark background
   </verify>
   <done>Outreach wedge is navigable; empty state text is readable with sufficient contrast</done>
   </task>

</tasks>

<verification>
Run the app and verify all 4 UAT issues are resolved:

1. **Template Editor header**: Resize to narrow width, buttons stay visible
2. **Delete confirmation**: Shows proper AlertDialog, not auto-closing dropdown
3. **Outreach navigation**: Wedge click works, no "Coming Soon" blocker
4. **Outreach visibility**: Empty states have readable text contrast

```bash
npm start
```

Manual verification required - these are visual/interactive fixes.
</verification>

<success_criteria>

- Template editor header layout handles narrow widths without button overflow
- Delete template shows AlertDialog confirmation that persists until user action
- Outreach section is accessible via wheel navigation
- Empty state text is visible with good contrast on all backgrounds
  </success_criteria>

<output>
After completion, create `.planning/phases/09-communication-infrastructure/09-04-SUMMARY.md`
</output>
